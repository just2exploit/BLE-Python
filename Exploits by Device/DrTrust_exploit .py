import pygatt
from time import sleep

from pygatt import BLEAddressType

BD_address = "F0:C7:7F:1C:57:82"  # change the bdaddress
uuid = "0000fff3-0000-1000-8000-00805f9b34fb"
adapter = pygatt.GATTToolBackend()
adapter.start()
while True:
    try:
        device =adapter.connect(BD_address,timeout=5,address_type=BLEAddressType.random)
        break
    except pygatt.exceptions.NotConnectedError:
        device=adapter.connect(BD_address,timeout=10,address_type=BLEAddressType.public)
        break

print device
device.char_write(uuid,bytearray([0x00,0x02,0x03,0x40,0x45]))
sleep(20)
device.char_write(uuid,bytearray([0x00,0x02,0x03,0x44,0x49]))
sleep(5)

adapter.stop()
